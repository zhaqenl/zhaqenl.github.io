<!DOCTYPE html>
<html lang="en"><head><title>Permutations using Backtracking</title><meta charset="utf-8" /><meta content="width=device-width,initial-scale=1.0,user-scalable=yes" name="viewport" /><meta content="noodp,noydir" name="robots" /><meta content="Permutations using Backtracking" name="description" /><meta content="python, permutation, backtracking, permutations, backtrack" name="keywords" /><meta content="Permutations using Backtracking" property="og:title" /><meta content="article" property="og:type" /><meta content="https://zhaqenl.github.io/en/permutations/" property="og:url" /><meta content="https://avatars0.githubusercontent.com/u/29517051" property="og:image" /><link href="/static/ico/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180" /><link href="/static/ico/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png" /><link href="/static/ico/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png" /><link href="/static/ico/manifest.json" rel="manifest" /><link color="#5bbad5" href="/static/ico/safari-pinned-tab.svg" rel="mask-icon" /><meta content="#ffffff" name="theme-color" /><style media="all" type="text/css">html {    color: #333;    font-size: 1em;    font-family: Georgia, Cambria, Palatino, "Palatino Linotype", "Times New Roman", Times, serif;    line-height: 1.45;    text-align: left:    width: 100%;    max-width: 40em;    margin: 0 auto 0 auto;    padding: 0;}body {    border-top: hidden;    border-bottom: hidden;    padding: 0 1.5em 1em 1.5em;    margin: 0;}#content {    -webkit-column-count: 1;    -moz-column-count: 1;    column-count: 1;}code {    font-size: 0.9em;    font-family: "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Lucida Console", "Courier New", Courier, monospace;    color: black;    display: inline-block;    font-weight: bold;}pre code {    font-size: 1em;    font-family: monospace;    line-height: 1.3em;    overflow: auto;    font-weight: normal;}kbd {    font-size: 1.1em;    padding: 0.1em 0.6em;    border: 1px solid #ccc;    font-family: monospace;    background-color: #f7f7f7;    color: #333;    -moz-box-shadow: 0 1px 0px rgba(0, 0, 0, 0.2),0 0 0 2px #ffffff inset;    -webkit-box-shadow: 0 1px 0px rgba(0, 0, 0, 0.2),0 0 0 2px #ffffff inset;    box-shadow: 0 1px 0px rgba(0, 0, 0, 0.2),0 0 0 2px #ffffff inset;    -moz-border-radius: 3px;    -webkit-border-radius: 3px;    border-radius: 3px;    display: inline-block;    margin: 0 0.1em;    text-shadow: 0 1px 0 #fff;    white-space: nowrap;}h1, h2, h3, h4, h5, h6 {    font-family: Calibri, "Gill Sans", "Gill Sans MT", "Myriad Pro", Myriad, "DejaVu Sans", Tahoma, Geneva, Helvetica, Arial, sans-serif;    margin-bottom: 0;}h1 {    font-size: 2.5em;    text-align: center;    border-bottom: 6px solid black;}h2 {    font-size: 2.0em;    text-align: left;    border-bottom: 2px solid black;}h3 {    font-size: 1.6em;    text-align: left;    border-bottom: 1px solid lightgrey;}h4 {    font-size: 1.5em;    text-align: left;}h5 {    font-size: 1.3em;    text-align: left;}ul, ol {    padding-left: 2em;}ul li {    list-style-type: square;}ul li li {    list-style-type: disc;}ul li li li {    list-style-type: circle;}ol li {    list-style-type: decimal;}p, para, b, strong, i, em, emph {    font-size: 1em;}blockquote {    font-size: 1.2em;    font-style: italic;    margin-left: 2em;}b, strong {    font-weight: bold;}i, em, emph {    font-style: italic;}table {    margin: 0.5em;    border-spacing: 0;    border-collapse: collapse;}th, td {    border: 1px solid lightgray;    padding-top: 0;    padding-bottom: 0;    padding-left: 0.45em;    padding-right: 0.45em;}.text-right {    text-align: right;}.text-small {    font-size: small;}.text-x-small {    font-size: x-small;}.banner {    display: block;    width: 100%;    margin-left: auto;    margin-right: auto;}.footer {    text-align: right;    float: right;    max-width: 18em;}.cc {    border-width: 0}.center {    text-align: center;}</style><style media="all" type="text/css">/* Ewan Themes -- based 99.99% from Tomorrow Night Theme *//* http://jmblog.github.com/color-themes-for-google-code-highlightjs *//* Original theme - https://github.com/chriskempson/tomorrow-theme *//* http://jmblog.github.com/color-themes-for-google-code-highlightjs *//* Tomorrow Comment */.hljs-comment {  color: #969896;}/* Tomorrow Red */.hljs-variable,.hljs-attribute,.hljs-tag,.hljs-regexp,.ruby .hljs-constant,.xml .hljs-tag .hljs-title,.xml .hljs-pi,.xml .hljs-doctype,.html .hljs-doctype,.css .hljs-id,.css .hljs-class,.css .hljs-pseudo {  color: #cc6666;}/* Tomorrow Orange */.hljs-number,.hljs-preprocessor,.hljs-pragma,.hljs-built_in,.hljs-literal,.hljs-params,.hljs-constant {  color: #de935f;}/* Tomorrow Yellow */.ruby .hljs-class .hljs-title,.css .hljs-rule .hljs-attribute {  color: #f0c674;}/* Tomorrow Green */.hljs-string,.hljs-value,.hljs-inheritance,.hljs-header,.hljs-name,.ruby .hljs-symbol,.xml .hljs-cdata {  color: #b5bd68;}/* Tomorrow Aqua */.hljs-title,.css .hljs-hexcolor {  color: #8abeb7;}/* Tomorrow Blue */.hljs-function,.python .hljs-decorator,.python .hljs-title,.ruby .hljs-function .hljs-title,.ruby .hljs-title .hljs-keyword,.perl .hljs-sub,.javascript .hljs-title,.coffeescript .hljs-title {  color: #81a2be;}/* Tomorrow Purple */.hljs-keyword,.javascript .hljs-function {  color: #b294bb;}.hljs {  display: block;  overflow-x: auto;  background: #1d1f21;  color: #c5c8c6;  padding: 0.5em;  -webkit-text-size-adjust: none;}.coffeescript .javascript,.javascript .xml,.tex .hljs-formula,.xml .javascript,.xml .vbscript,.xml .css,.xml .hljs-cdata {  opacity: 0.5;}pre code {    font-size: 1.1em;    font-family: monospace;    line-height: 1.3em;    overflow: auto;}</style></head><body><div id="content"><h1>Permutations using Backtracking</h1><h2>Introduction</h2><p>A permutation is a rearrangement of a given sequence. The difference between a <i>permutation</i> and a <i>combination</i> lies in the importance of the ordering of its elements. So, in a combination lock, it really is not technically correct to be called it that, because, for example, if your lock combination is <i>699</i>, when someone else punches in <i>969</i>, it should work too, because in a combination, the order doesn’t matter, but in a permutation, it does.</p><p>So, as an example, in the string sequence <i>mon</i>, the possible permutations would, lexicographically, be:</p><pre><code>mon
mno
omn
onm
nmo
nom
</code></pre><h2>The Code</h2><p>The following program accomplishes the task of generating all the possible permutations of a given string sequence using backtracking:</p><pre><code>def permutations&#40;&#41;:
    global running
    global characters
    global bitmask
    if len&#40;running&#41; == len&#40;characters&#41;:
        print&#40;''.join&#40;running&#41;&#41;
    else:
        for i in xrange&#40;len&#40;characters&#41;&#41;:
            if &#40;&#40;bitmask &gt;&gt; i&#41; &amp; 1&#41; == 0:
                bitmask |= 1 &lt;&lt; i
                running.append&#40;characters&#91;i&#93;&#41;
                permutations&#40;&#41;
                bitmask &#94;= 1 &lt;&lt; i
                running.pop&#40;&#41;

raw = raw&#95;input&#40;&#41;
characters = list&#40;raw&#41;
running = &#91;&#93;
bitmask = 0
permutations&#40;&#41;
</code></pre><p>The first block of code is the function that we'll be invoking to do our bidding of <i>generating</i> the permutations.</p><p>The value of <code>RAW</code> will be initialized to the input of the user, and will later be converted to a list to be initialized to <code>CHARACTERS</code>.</p><p><code>CHARACTERS</code> will serve both as a placeholder to compare the ongoing length of <code>RUNNING</code>, which will hold the <i>still-to-be-ready</i> next permutation, and as the placeholder to determine what part of <code>CHARACTERS</code> to append to <code>RUNNING</code>, next.</p><p>Lastly, <code>BITMASK</code> will serve as the predictor, whether or not the current index of <code>CHARACTERS</code> is what we’ll need to append to <code>RUNNING</code>, to get closer to our next permutation.</p><p>Inside <code>PERMUTATIONS&#40;&#41;</code>, the first three <code>GLOBAL</code> statements are to reference the previously mentioned outside variables, inside the function:</p><pre><code>global running
global characters
global bitmask
</code></pre><p>Immediately after that, is a condition, which checks if the length of the accumulated value of <code>RUNNING</code> is equal to the length of the placeholder <code>CHARACTERS</code>, and if satisfied, means that we now have a ready permutation to be printed:</p><pre><code>if len&#40;running&#41; == len&#40;characters&#41;:
        print&#40;''.join&#40;running&#41;&#41;
</code></pre><p>If the condition is not yet satisfied, it means that we still have more to append to <code>RUNNING</code>, before we’re able to output its contents.</p><p>For that, we go to the <code>ELSE</code> clause of the program:</p><pre><code>else:
        for i in xrange&#40;len&#40;characters&#41;&#41;:
            if &#40;&#40;bitmask &gt;&gt; i&#41; &amp; 1&#41; == 0:
                bitmask |= 1 &lt;&lt; i
                running.append&#40;characters&#91;i&#93;&#41;
                permutations&#40;&#41;
                bitmask &#94;= 1 &lt;&lt; i
                running.pop&#40;&#41;
</code></pre><p>The <code>FOR</code> is to iterate over the indexes of <code>CHARACTERS</code>. Inside, an <code>IF</code> clause can be found, which checks whether the current index <code>I</code>, is of the <i>correct</i> index to be appended to <code>RUNNING</code>, then does the <i>select, explore, then deselect</i> routine, which is the essence of backtracking, to accomplish what we need of it, which is to generate the next permutations.</p><p>Previously mentioned was the <i>select, explore, then deselect</i> routine or the backtracking routine. The selection part happens literally inside <code>RUNNING.APPEND&#40;CHARACTERS&#91;I&#93;&#41;</code>, in <code>CHARACTERS&#91;I&#93;</code> (but the previous <code>BITMASK |= 1 &lt;&lt; I</code> task is also important as I'll discuss later), the exploration part happens in the recursive call to <code>PERMUTATIONS&#40;&#41;</code>, and finally, the deselection part (or undoing) happens in <code>RUNNING.POP&#40;&#41;</code>, wherein, the lastly appended item to <code>RUNNING</code> is removed, and in <code>BITMASK &#94;= 1 &lt;&lt; I</code>, in which the changes to <code>BITMASK</code> through <code>BITMASK |= 1 &lt;&lt; I</code> is undone.</p><p>Now, what really is the role of <code>BITMASK</code> in all of this? As you may or may not have already noticed, this program makes use of bitwise operators to achieve its goals. Firstly, in  <code>&#40;&#40;BITMASK &gt;&gt; I&#41; &amp; 1&#41;</code>, it checks whether the current index <code>I</code> is the appropriate index of  <code>CHARACTERS</code> to be inserted to <code>RUNNING</code>. If satisfied, the <code>BITMASK |= 1 &lt;&lt; I</code> task is run, which  essentially <i>raises</i> the threshold of <code>BITMASK</code> to changes in <code>I</code>, so that, when shifted right by  <code>I</code> bits in the next <code>PERMUTATIONS&#40;&#41;</code> call, <code>I</code> will be forced to change its value (in contrast to  the value of <code>I</code> in the outside <code>FOR</code>), so as to force <code>I</code> to move to the next index of <code>CHARACTERS</code>  to possibly insert to <code>RUNNING</code>.</p><p>After the selection and exploration, now comes the deselection part, in which we undo the changes we made to <code>BITMASK</code> and <code>RUNNING</code> to further check if permutations can still be generated. Those are done through <code>RUNNING.POP&#40;&#41;</code> which removes the last element of <code>RUNNING</code>, and through  <code>BITMASK &#94;= 1 &lt;&lt; I</code>.</p><p>If after the deselections, the next value of <code>I</code> in the <code>FOR</code> loop is still within <code>XRANGE&#40;LEN&#40;CHARACTERS&#41;&#41;</code>, the adventure continues through its incrementation and the possible execution of its body provided that the condition can be satisfied.</p><hr/><div class="footer"><p><div class="text-small"> <a href='/en'>Home</a> · <a href='/en/about'>About</a> · <a href='https://github.com/zhaqenl/zhaqenl.github.io'>Source</a> </div> <div class="text-x-small"> Created with <a href='https://github.com/ebzzry/emem'>emem</a> <div></p><p><div class="text-x-small"> <a rel="license" href="https://creativecommons.org/publicdomain/zero/1.0/deed.en"><img alt="CC0 1.0 Universal (CC0 1.0) Public Domain Dedication" class="cc" src="/pictures/cc0-88x31.png" /></a><br> This work is in the <a rel="license" href="https://creativecommons.org/publicdomain/zero/1.0/deed.en">public domain.</a><br> </div></p><p></div></p></div><script src="/static/js/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create', 'UA-121960562-1', 'auto');ga('send', 'pageview');</script></body></html>